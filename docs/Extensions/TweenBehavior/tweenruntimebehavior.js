var gdjs;(function(T){function v(c){return c.setScaleX&&c.setScaleY&&c.getScaleX&&c.getScaleY}function F(c){return c.setOpacity&&c.getOpacity}function R(c){return c.setColor&&c.getColor}function P(c){return c.setCharacterSize&&c.getCharacterSize}function j(c,e,t){c/=255,e/=255,t/=255;let n=Math.max(c,e,t),i=n-Math.min(c,e,t),o=1-Math.abs(n+n-i-1),a=i&&(n===c?(e-t)/i:n===e?2+(t-c)/i:4+(c-e)/i);return[Math.round(60*(a<0?a+6:a)),Math.round((o?i/o:0)*100),Math.round((n+n-i)/2*100)]}function V(c,e,t){c=c%=360,c<0&&(c+=360),e=e/100,t=t/100;const n=e*Math.min(t,1-t),i=(o=0,a=(o+c/30)%12)=>t-n*Math.max(Math.min(a-3,9-a,1),-1);return[Math.round(i(0)*255),Math.round(i(8)*255),Math.round(i(4)*255)]}const g=T.evtTools.common.lerp,_=T.evtTools.common.exponentialInterpolation;class C extends T.RuntimeBehavior{constructor(e,t,n){super(e,t,n);this._tweens=new T.TweenRuntimeBehavior.TweenManager;this._isActive=!0}updateFromBehaviorData(e,t){return!0}doStepPreEvents(e){this._tweens.step()}_deleteFromScene(){this.owner.deleteFromScene(this.owner.getInstanceContainer())}addVariableTween(e,t,n,i,o,a,l){this._tweens.addSimpleTween(e,this.owner.getRuntimeScene(),a/1e3,o,g,n,i,r=>t.setNumber(r),l?()=>this._deleteFromScene():null)}addVariableTween2(e,t,n,i,o,a){this._addVariableTween(e,t,n,i,o/1e3,a,this.owner.getRuntimeScene())}addVariableTween3(e,t,n,i,o,a){this._addVariableTween(e,t,n,i,o,a,this.owner)}_addVariableTween(e,t,n,i,o,a,l){t.getType()==="number"&&this._tweens.addSimpleTween(e,l,o,i,g,t.getValue(),n,r=>t.setNumber(r),a?()=>this._deleteFromScene():null)}addValueTween(e,t,n,i,o,a,l){this._tweens.addSimpleTween(e,this.owner,o,i,a?_:g,t,n,r=>{},l?()=>this._deleteFromScene():null)}addObjectPositionTween(e,t,n,i,o,a){this._addObjectPositionTween(e,t,n,i,o/1e3,a,this.owner.getRuntimeScene())}addObjectPositionTween2(e,t,n,i,o,a){this._addObjectPositionTween(e,t,n,i,o,a,this.owner)}_addObjectPositionTween(e,t,n,i,o,a,l){this._tweens.addMultiTween(e,l,o,i,g,[this.owner.getX(),this.owner.getY()],[t,n],([r,s])=>this.owner.setPosition(r,s),a?()=>this._deleteFromScene():null)}addObjectPositionXTween(e,t,n,i,o){this._addObjectPositionXTween(e,t,n,i/1e3,o,this.owner.getRuntimeScene())}addObjectPositionXTween2(e,t,n,i,o){this._addObjectPositionXTween(e,t,n,i,o,this.owner)}_addObjectPositionXTween(e,t,n,i,o,a){this._tweens.addSimpleTween(e,a,i,n,g,this.owner.getX(),t,l=>this.owner.setX(l),o?()=>this._deleteFromScene():null)}addObjectPositionYTween(e,t,n,i,o){this._addObjectPositionYTween(e,t,n,i/1e3,o,this.owner.getRuntimeScene())}addObjectPositionYTween2(e,t,n,i,o){this._addObjectPositionYTween(e,t,n,i,o,this.owner)}_addObjectPositionYTween(e,t,n,i,o,a){this._tweens.addSimpleTween(e,a,i,n,g,this.owner.getY(),t,l=>this.owner.setY(l),o?()=>this._deleteFromScene():null)}addObjectPositionZTween(e,t,n,i,o){const{owner:a}=this;a instanceof T.RuntimeObject3D&&this._tweens.addSimpleTween(e,this.owner.getRuntimeScene(),i/1e3,n,g,a.getZ(),t,l=>a.setZ(l),o?()=>this._deleteFromScene():null)}addObjectAngleTween(e,t,n,i,o){this._addObjectAngleTween(e,t,n,i/1e3,o,this.owner.getRuntimeScene())}addObjectAngleTween2(e,t,n,i,o){this._addObjectAngleTween(e,t,n,i,o,this.owner)}_addObjectAngleTween(e,t,n,i,o,a){this._tweens.addSimpleTween(e,a,i,n,g,this.owner.getAngle(),t,l=>this.owner.setAngle(l),o?()=>this._deleteFromScene():null)}addObjectScaleTween(e,t,n,i,o,a,l){this._addObjectScaleTween(e,t,n,i,o/1e3,a,l,this.owner.getRuntimeScene(),g)}addObjectScaleTween2(e,t,n,i,o,a,l){this._addObjectScaleTween(e,t,n,i,o,a,l,this.owner,_)}_addObjectScaleTween(e,t,n,i,o,a,l,r,s){const d=this.owner;if(!v(d))return;t<0&&(t=0),n<0&&(n=0);const h=l?([u,w])=>{const b=d.getCenterXInScene(),m=d.getCenterYInScene();d.setScaleX(u),d.setScaleY(w),d.setCenterPositionInScene(b,m)}:([u,w])=>{d.setScaleX(u),d.setScaleY(w)};this._tweens.addMultiTween(e,r,o,i,s,[d.getScaleX(),d.getScaleY()],[t,n],h,a?()=>this._deleteFromScene():null)}addObjectScaleXTween(e,t,n,i,o,a){this._addObjectScaleXTween(e,t,n,i/1e3,o,a,this.owner.getRuntimeScene(),g)}addObjectScaleXTween2(e,t,n,i,o,a){this._addObjectScaleXTween(e,t,n,i,o,a,this.owner,_)}_addObjectScaleXTween(e,t,n,i,o,a,l,r){const s=this.owner;if(!v(s))return;const d=a?h=>{const u=s.getCenterXInScene();s.setScaleX(h),s.setCenterXInScene(u)}:h=>s.setScaleX(h);this._tweens.addSimpleTween(e,l,i,n,r,s.getScaleX(),t,d,o?()=>this._deleteFromScene():null)}addObjectScaleYTween(e,t,n,i,o,a){this._addObjectScaleYTween(e,t,n,i/1e3,o,a,this.owner.getRuntimeScene(),g)}addObjectScaleYTween2(e,t,n,i,o,a){this._addObjectScaleYTween(e,t,n,i,o,a,this.owner,_)}_addObjectScaleYTween(e,t,n,i,o,a,l,r){const s=this.owner;if(!v(s))return;const d=a?h=>{const u=s.getCenterYInScene();s.setScaleY(h),s.setCenterYInScene(u)}:h=>s.setScaleY(h);this._tweens.addSimpleTween(e,l,i,n,r,s.getScaleY(),t,d,o?()=>this._deleteFromScene():null)}addObjectOpacityTween(e,t,n,i,o){this._addObjectOpacityTween(e,t,n,i/1e3,o,this.owner.getRuntimeScene())}addObjectOpacityTween2(e,t,n,i,o){this._addObjectOpacityTween(e,t,n,i,o,this.owner)}_addObjectOpacityTween(e,t,n,i,o,a){const l=this.owner;!F(l)||this._tweens.addSimpleTween(e,a,i,n,g,l.getOpacity(),t,r=>l.setOpacity(r),o?()=>this._deleteFromScene():null)}addObjectColorTween(e,t,n,i,o,a){this._addObjectColorTween(e,t,n,i/1e3,o,a,this.owner.getRuntimeScene())}addObjectColorTween2(e,t,n,i,o,a=!0){this._addObjectColorTween(e,t,n,i,o,a,this.owner)}_addObjectColorTween(e,t,n,i,o,a,l){const r=this.owner;if(!R(r))return;const s=T.rgbOrHexToRGBColor(r.getColor()),d=T.rgbOrHexToRGBColor(t);let h,u,w;a?(h=j(s[0],s[1],s[2]),u=j(d[0],d[1],d[2]),w=([b,m,p])=>{const f=V(b,m,p);r.setColor(Math.floor(f[0])+";"+Math.floor(f[1])+";"+Math.floor(f[2]))}):(h=s,u=d,w=([b,m,p])=>{r.setColor(Math.floor(b)+";"+Math.floor(m)+";"+Math.floor(p))}),this._tweens.addMultiTween(e,l,i,n,g,h,u,w,o?()=>this._deleteFromScene():null)}addObjectColorHSLTween(e,t,n,i,o,a,l,r){this._addObjectColorHSLTween(e,t,n,i,o,a,l/1e3,r,this.owner.getRuntimeScene())}addObjectColorHSLTween2(e,t,n,i,o,a,l,r){this._addObjectColorHSLTween(e,t,n,i,o,a,l,r,this.owner)}_addObjectColorHSLTween(e,t,n,i,o,a,l,r,s){if(!R(this.owner))return;const d=this.owner,h=d.getColor().split(";");if(h.length<3)return;const u=j(parseFloat(h[0]),parseFloat(h[1]),parseFloat(h[2])),w=n?t:u[0],b=i===-1?u[1]:Math.min(Math.max(i,0),100),m=o===-1?u[2]:Math.min(Math.max(o,0),100);this._tweens.addMultiTween(e,s,l,a,g,u,[w,b,m],([p,f,S])=>{const O=V(p,f,S);d.setColor(Math.floor(O[0])+";"+Math.floor(O[1])+";"+Math.floor(O[2]))},r?()=>this._deleteFromScene():null)}addTextObjectCharacterSizeTween(e,t,n,i,o){this._addTextObjectCharacterSizeTween(e,t,n,i/1e3,o,this.owner.getRuntimeScene(),g)}addTextObjectCharacterSizeTween2(e,t,n,i,o){this._addTextObjectCharacterSizeTween(e,t,n,i,o,this.owner,_)}_addTextObjectCharacterSizeTween(e,t,n,i,o,a,l){const r=this.owner;!P(r)||this._tweens.addSimpleTween(e,a,i,n,l,r.getCharacterSize(),t,s=>r.setCharacterSize(s),o?()=>this._deleteFromScene():null)}addObjectWidthTween(e,t,n,i,o){this._addObjectWidthTween(e,t,n,i/1e3,o,this.owner.getRuntimeScene())}addObjectWidthTween2(e,t,n,i,o){this._addObjectWidthTween(e,t,n,i,o,this.owner)}_addObjectWidthTween(e,t,n,i,o,a){this._tweens.addSimpleTween(e,a,i,n,g,this.owner.getWidth(),t,l=>this.owner.setWidth(l),o?()=>this._deleteFromScene():null)}addObjectHeightTween(e,t,n,i,o){this._addObjectHeightTween(e,t,n,i/1e3,o,this.owner.getRuntimeScene())}addObjectHeightTween2(e,t,n,i,o){this._addObjectHeightTween(e,t,n,i,o,this.owner)}_addObjectHeightTween(e,t,n,i,o,a){this._tweens.addSimpleTween(e,a,i,n,g,this.owner.getHeight(),t,l=>this.owner.setHeight(l),o?()=>this._deleteFromScene():null)}addObjectDepthTween(e,t,n,i,o){const{owner:a}=this;a instanceof T.RuntimeObject3D&&this._tweens.addSimpleTween(e,this.owner.getRuntimeScene(),i/1e3,n,g,a.getDepth(),t,l=>a.setDepth(l),o?()=>this._deleteFromScene():null)}isPlaying(e){return this._tweens.isPlaying(e)}exists(e){return this._tweens.exists(e)}hasFinished(e){return this._tweens.hasFinished(e)}pauseTween(e){this._isActive&&this._tweens.pauseTween(e)}stopTween(e,t){this._isActive&&this._tweens.stopTween(e,t)}resumeTween(e){this._isActive&&this._tweens.resumeTween(e)}removeTween(e){this._tweens.removeTween(e)}getProgress(e){return this._tweens.getProgress(e)}getValue(e){return this._tweens.getValue(e)}onDeActivate(){this._isActive=!1}onActivate(){this._isActive=!0}}T.TweenRuntimeBehavior=C,T.registerBehavior("Tween::TweenBehavior",T.TweenRuntimeBehavior),function(a){const c=T.evtTools.tween.easingFunctions;class e{constructor(){this._tweens=new Map;this._activeTweens=new Array}step(){for(const r of this._activeTweens)r.step()}addSimpleTween(r,s,d,h,u,w,b,m,p){const f=c[h];if(!f)return;this.removeTween(r);const S=new a.SimpleTweenInstance(s,d,f,u,w,b,m,p);this._tweens.set(r,S),this._addActiveTween(S)}addMultiTween(r,s,d,h,u,w,b,m,p){const f=c[h];if(!f)return;this.removeTween(r);const S=new a.MultiTweenInstance(s,d,f,u,w,b,m,p);this._tweens.set(r,S),this._addActiveTween(S)}exists(r){return this._tweens.has(r)}isPlaying(r){const s=this._tweens.get(r);return!!s&&s.isPlaying()}hasFinished(r){const s=this._tweens.get(r);return!!s&&s.hasFinished()}pauseTween(r){const s=this._tweens.get(r);!s||!s.isPlaying()||s.hasFinished()||(this._removeActiveTween(s),s.pause())}resumeTween(r){const s=this._tweens.get(r);!s||s.isPlaying()||s.hasFinished()||(this._addActiveTween(s),s.resume())}stopTween(r,s){const d=this._tweens.get(r);!d||d.hasFinished()||(d.isPlaying()&&this._removeActiveTween(d),d.stop(s))}removeTween(r){const s=this._tweens.get(r);!s||(s.isPlaying()&&this._removeActiveTween(s),this._tweens.delete(r))}_addActiveTween(r){this._activeTweens.push(r)}_removeActiveTween(r){const s=this._activeTweens.findIndex(d=>d===r);this._activeTweens.splice(s,1)}getProgress(r){const s=this._tweens.get(r);return s?s.getProgress():0}getValue(r){const s=this._tweens.get(r);return s?s.getValue():0}}a.TweenManager=e;const t=()=>{};class n{constructor(r,s,d,h,u){this.isPaused=!1;this.timeSource=r,this.totalDuration=s,this.easing=d,this.interpolate=h,this.elapsedTime=0,this.onFinish=u||t}step(){!this.isPlaying()||(this.elapsedTime=Math.min(this.elapsedTime+this.timeSource.getElapsedTime()/1e3,this.totalDuration),this._updateValue())}isPlaying(){return!this.isPaused&&!this.hasFinished()}hasFinished(){return this.elapsedTime===this.totalDuration}stop(r){this.elapsedTime=this.totalDuration,r&&this._updateValue()}resume(){this.isPaused=!1}pause(){this.isPaused=!0}getProgress(){return this.elapsedTime/this.totalDuration}}a.AbstractTweenInstance=n;class i extends n{constructor(r,s,d,h,u,w,b,m){super(r,s,d,h,m);this.initialValue=u,this.currentValue=u,this.targetedValue=w,this.setValue=b}_updateValue(){const r=this.easing(this.getProgress()),s=this.interpolate(this.initialValue,this.targetedValue,r);this.currentValue=s,this.setValue(s),this.hasFinished()&&this.onFinish()}getValue(){return this.currentValue}}a.SimpleTweenInstance=i;class o extends n{constructor(r,s,d,h,u,w,b,m){super(r,s,d,h,m);this.currentValues=new Array;this.initialValue=u,this.targetedValue=w,this.setValue=b}_updateValue(){const r=this.easing(this.getProgress()),s=this.initialValue.length;this.currentValues.length=s;for(let d=0;d<s;d++)this.currentValues[d]=this.interpolate(this.initialValue[d],this.targetedValue[d],r);this.setValue(this.currentValues),this.hasFinished()&&this.onFinish()}getValue(){return 0}}a.MultiTweenInstance=o}(C=T.TweenRuntimeBehavior||(T.TweenRuntimeBehavior={}))})(gdjs||(gdjs={}));
//# sourceMappingURL=tweenruntimebehavior.js.map
